{"remainingRequest":"/home/kd/Desktop/jpc/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kd/Desktop/jpc/src/components/PlaidLink.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kd/Desktop/jpc/src/components/PlaidLink.vue","mtime":1678879380362},{"path":"/home/kd/Desktop/jpc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kd/Desktop/jpc/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/home/kd/Desktop/jpc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kd/Desktop/jpc/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGxhaWRMaW5rIiwKICBwcm9wczogewogICAgcGxhaWRVcmw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiaHR0cHM6Ly9jZG4ucGxhaWQuY29tL2xpbmsvdjIvc3RhYmxlL2xpbmstaW5pdGlhbGl6ZS5qcyIsCiAgICB9LAogICAgZW52OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogInNhbmRib3giLAogICAgfSwKICAgIGluc3RpdHV0aW9uOiBTdHJpbmcsCiAgICBzZWxlY3RBY2NvdW50OiBCb29sZWFuLAogICAgdG9rZW46IFN0cmluZywKICAgIHByb2R1Y3Q6IHsKICAgICAgdHlwZTogW1N0cmluZywgQXJyYXldLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFsidHJhbnNhY3Rpb25zIl07CiAgICAgIH0sCiAgICB9LAogICAgcmVjZWl2ZWRSZWRpcmVjdFVyaTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgbGFuZ3VhZ2U6IFN0cmluZywKICAgIGNvdW50cnlDb2RlczogQXJyYXksCiAgICBpc1dlYlZpZXc6IEJvb2xlYW4sCiAgICBjbGllbnROYW1lOiBTdHJpbmcsCiAgICBwdWJsaWNLZXk6IFN0cmluZywKICAgIHdlYmhvb2s6IFN0cmluZywKICAgIG9uTG9hZDogRnVuY3Rpb24sCiAgICBvblN1Y2Nlc3M6IEZ1bmN0aW9uLAogICAgb25FeGl0OiBGdW5jdGlvbiwKICAgIG9uRXZlbnQ6IEZ1bmN0aW9uLAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZFNjcmlwdCh0aGlzLnBsYWlkVXJsKQogICAgICAudGhlbih0aGlzLm9uU2NyaXB0TG9hZGVkKQogICAgICAuY2F0Y2godGhpcy5vblNjcmlwdEVycm9yKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAod2luZG93LmxpbmtIYW5kbGVyKSB7CiAgICAgIHdpbmRvdy5saW5rSGFuZGxlci5leGl0KCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblNjcmlwdEVycm9yKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnB1YmxpY0tleSkKICAgICAgY29uc29sZS5lcnJvcigiVGhlcmUgd2FzIGFuIGlzc3VlIGxvYWRpbmcgdGhlIGxpbmstaW5pdGlhbGl6ZS5qcyBzY3JpcHQiKTsKICAgIH0sCiAgICBvblNjcmlwdExvYWRlZCgpIHsKICAgICAgbGV0IHByb3BzID0gewogICAgICAgIGNsaWVudE5hbWU6IHRoaXMuY2xpZW50TmFtZSwKICAgICAgICBlbnY6IHRoaXMuZW52LAogICAgICAgIGtleTogdGhpcy5wdWJsaWNLZXksCiAgICAgICAgb25FeGl0OiB0aGlzLm9uRXhpdCwKICAgICAgICBvbkV2ZW50OiB0aGlzLm9uRXZlbnQsCiAgICAgICAgb25TdWNjZXNzOiB0aGlzLm9uU3VjY2VzcywKICAgICAgICBwcm9kdWN0OiB0aGlzLnByb2R1Y3QsCiAgICAgICAgc2VsZWN0QWNjb3VudDogdGhpcy5zZWxlY3RBY2NvdW50LAogICAgICAgIHRva2VuOiB0aGlzLnRva2VuLAogICAgICAgIHdlYmhvb2s6IHRoaXMud2ViaG9vaywKICAgICAgfTsKICAgICAgaWYgKHRoaXMucmVjZWl2ZWRSZWRpcmVjdFVyaSkgewogICAgICAgIHByb3BzLnJlY2VpdmVkUmVkaXJlY3RVcmkgPSB0aGlzLnJlY2VpdmVkUmVkaXJlY3RVcmk7CiAgICAgIH0KICAgICAgd2luZG93LmxpbmtIYW5kbGVyID0gd2luZG93LlBsYWlkLmNyZWF0ZShwcm9wcyk7CiAgICAgIHRoaXMuJGVtaXQoInBsYWlkTG9hZGVkIik7CiAgICAgIC8vIHRoaXMub25Mb2FkKCk7CiAgICB9LAogICAgaGFuZGxlT25DbGljaygpIHsKICAgICAgY29uc3QgaW5zdGl0dXRpb24gPSB0aGlzLmluc3RpdHV0aW9uIHx8IG51bGw7CiAgICAgIGlmICh3aW5kb3cubGlua0hhbmRsZXIpIHsKICAgICAgICB3aW5kb3cubGlua0hhbmRsZXIub3BlbihpbnN0aXR1dGlvbik7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkU2NyaXB0KHNyYykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjPSInICsgc3JjICsgJyJdJykpIHsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICBlbC50eXBlID0gInRleHQvamF2YXNjcmlwdCI7CiAgICAgICAgZWwuYXN5bmMgPSB0cnVlOwogICAgICAgIGVsLnNyYyA9IHNyYzsKICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgcmVzb2x2ZSk7CiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCByZWplY3QpOwogICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IiwgcmVqZWN0KTsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsKTsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgICRwcm9wczogewogICAgICBoYW5kbGVyKG5ld1ZhbCkgewogICAgICAgIGlmIChuZXdWYWwudG9rZW4pIHsKICAgICAgICAgIHRoaXMub25TY3JpcHRMb2FkZWQoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["PlaidLink.vue"],"names":[],"mappings":";AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PlaidLink.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"plaid-link-wrapper\">\n    <slot name=\"button\" v-bind:onClick=\"handleOnClick\">\n      <button class=\"plaid-link-button\" @click=\"handleOnClick\">\n        <slot />\n      </button>\n    </slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"PlaidLink\",\n  props: {\n    plaidUrl: {\n      type: String,\n      default: \"https://cdn.plaid.com/link/v2/stable/link-initialize.js\",\n    },\n    env: {\n      type: String,\n      default: \"sandbox\",\n    },\n    institution: String,\n    selectAccount: Boolean,\n    token: String,\n    product: {\n      type: [String, Array],\n      default: function () {\n        return [\"transactions\"];\n      },\n    },\n    receivedRedirectUri: {\n      type: String,\n      default: null,\n    },\n    language: String,\n    countryCodes: Array,\n    isWebView: Boolean,\n    clientName: String,\n    publicKey: String,\n    webhook: String,\n    onLoad: Function,\n    onSuccess: Function,\n    onExit: Function,\n    onEvent: Function,\n  },\n  created() {\n    this.loadScript(this.plaidUrl)\n      .then(this.onScriptLoaded)\n      .catch(this.onScriptError);\n  },\n  beforeDestroy() {\n    if (window.linkHandler) {\n      window.linkHandler.exit();\n    }\n  },\n  methods: {\n    onScriptError(error) {\n      console.log(error)\n      console.log(this.publicKey)\n      console.error(\"There was an issue loading the link-initialize.js script\");\n    },\n    onScriptLoaded() {\n      let props = {\n        clientName: this.clientName,\n        env: this.env,\n        key: this.publicKey,\n        onExit: this.onExit,\n        onEvent: this.onEvent,\n        onSuccess: this.onSuccess,\n        product: this.product,\n        selectAccount: this.selectAccount,\n        token: this.token,\n        webhook: this.webhook,\n      };\n      if (this.receivedRedirectUri) {\n        props.receivedRedirectUri = this.receivedRedirectUri;\n      }\n      window.linkHandler = window.Plaid.create(props);\n      this.$emit(\"plaidLoaded\");\n      // this.onLoad();\n    },\n    handleOnClick() {\n      const institution = this.institution || null;\n      if (window.linkHandler) {\n        window.linkHandler.open(institution);\n      }\n    },\n    loadScript(src) {\n      return new Promise(function (resolve, reject) {\n        if (document.querySelector('script[src=\"' + src + '\"]')) {\n          resolve();\n          return;\n        }\n        const el = document.createElement(\"script\");\n        el.type = \"text/javascript\";\n        el.async = true;\n        el.src = src;\n        el.addEventListener(\"load\", resolve);\n        el.addEventListener(\"error\", reject);\n        el.addEventListener(\"abort\", reject);\n        document.head.appendChild(el);\n      });\n    },\n  },\n  watch: {\n    $props: {\n      handler(newVal) {\n        if (newVal.token) {\n          this.onScriptLoaded();\n        }\n      },\n      deep: true,\n    },\n  },\n};\n</script>"]}]}